{% extends "crm_autoescuela\base.html" %}
{% load static %}
{% block title %}Listado de Alumnos{% endblock %}

{% block content %}
<div id="alumnos-container">
    <div id="focus-trap" tabindex="-1" style="position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0;"></div>
    <br>
    {% include 'crm_autoescuela/_back_button.html' %}
    <h1>Listado de Alumnos</h1>
    <br>
    {% include "alumnos/alumnos_filter.html" %}
    <button id="create-alumno" class="btn btn-primary">Crear Nuevo Alumno</button>
    <br>
    <br>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Apellido 1</th>
                <th>Apellido 2</th>
                <th>Email</th>
                <th>Dirección Postal</th>
                <th>Teléfono</th>
                <th>Profesor</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody id="alumnos-list">
        </tbody>
    </table>
</div>

{% include "alumnos/modals/crear_alumno_modal.html" %}
{% include "alumnos/modals/editar_alumno_modal.html" %}
{% include "alumnos/modals/eliminar_alumno_modal.html" %}

<script type="text/template" id="alumno-template">
    <td><%= id %></td>
    <td><%= nombre %></td>
    <td><%= apellido1 %></td>
    <td><%= apellido2 %></td>
    <td><%= email %></td>
    <td><%= direccionPostal %></td>
    <td><%= telefono %></td>
    <td><% if (profesor) { %><%= profesor.nombre %> <%= profesor.apellido1 %><% } else { %>Sin asignar<% } %></td>
    <td>
        <button type="button" class="btn-edit btn btn-warning">Editar</button>
        <button type="button" class="delete-alumno btn btn-danger">Eliminar</button>
    </td>
</script>
{% endblock %}

{% block scripts %}
    <script src="{% static 'alumnos/js/libs/jquery-3.6.0.min.js' %}"></script>
    <script src="{% static 'alumnos/js/libs/underscore-min.js' %}"></script>
    <script src="{% static 'alumnos/js/libs/backbone-min.js' %}"></script>
    <script src="{% static 'alumnos/js/views/alumnoView.js' %}"></script>
    <script src="{% static 'alumnos/js/views/filtroView.js' %}"></script>
    <script src="{% static 'alumnos/js/views/alumnosView.js' %}"></script>
    <script src="{% static 'alumnos/js/modals/CreateAlumnoModal.js' %}"></script>
    <script src="{% static 'alumnos/js/modals/EditAlumnoModal.js' %}"></script>
    <script src="{% static 'alumnos/js/modals/DeleteAlumnoModal.js' %}"></script>
    <script src="{% static 'alumnos/js/app.js' %}"></script>
{% endblock %}